
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Komu W - Build a Go package that annotates errors with stack traces.</title>
    <meta name="description" content="Build a Go package that annotates errors with stack traces." />
    <meta property="og:url" content="https://www.komu.engineer/blog" />

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ADD FAVICON -->

    <link rel="stylesheet" href="./site.css">

    <!-- Get highlightjs by going to https://highlightjs.org/download/, select the languages you want and download. -->
    <!--
    <link rel="stylesheet" href="../../highlightjs/styles/default.css">
    <script src="../../highlightjs/highlight.pack.js"></script>
    -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</head>

<body>
    <div class="container">
        <div class="header">
            <a href="./index.html">Home</a>&nbsp;&nbsp;
        </div>
        <div class="left-sidebar">
            .
        </div>
        <div class="right-sidebar">
            .
        </div>

        <div class="main">
            <p>
<pre><code class="python">
import utils

h = __import__("6_hashmaps")


# Rabin-Karp algorithm is a string searching algorithm that uses hashing to find an exact match of a pattern string in a text.
def robin_karp(s: str, pattern: str):
    """
    https://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_algorithm
    """
    # O(nm)

    n = len(s)
    m = len(pattern)
    hash_pat = h.paul_larson_hash(pattern)

    for i in range(0, (n - m + 1)):
        xx = s[i : i + m]
        hs = h.paul_larson_hash(xx)
        if hs == hash_pat:
            if s[i : i + m] == pattern[0:m]:
                return i
    return None


res = robin_karp("komu", "mu")
utils.assert_r("strings", res, 2)


res = robin_karp("komu", "k")
utils.assert_r("strings", res, 0)


res = robin_karp("komu", "ko")
utils.assert_r("strings", res, 0)


res = robin_karp("abcdefghijklmnopqrstuvwxyz", "w")
utils.assert_r("strings", res, 22)
utils.assert_r("strings", res, "abcdefghijklmnopqrstuvwxyz".index("w"))
utils.assert_r("strings", list("abcdefghijklmnopqrstuvwxyz")[22], "w")


res = robin_karp("komu", "kw")
utils.assert_r("strings", res, None)


my_str = """So they build their world in great confusion
To force on us the devil's illusion.
But the stone that the builder refuse
Shall be the head cornerstone,
And no matter what game they play,
Eh, we got something they could never take away;
We got something they could never take away - Bob Marley"""
res = robin_karp(my_str, "builder")
utils.assert_r("strings", res, 105)
utils.assert_r("strings", res, my_str.index("builder"))

res = robin_karp(my_str, "king")
utils.assert_r("strings", res, None)

            </code></pre>
            </p>
        </div>
    </div>
</body>
    